# MySQL-表操作

表相当于文件，表中的一条记录就相当于文件的一行内容，不同的是，表中的一条记录有对应的标题，称为表的字段

数据表属于数据库，在创建数据表之前，应使用语句“USE<数据库>”指定操作在哪个数据库中进行，如果没有选择数据库，就会抛出 No database selected 的错误。

## 1. 创建表

```mysql
create table 表名(
字段名1 类型[(宽度) 字段约束],
字段名2 类型[(宽度) 字段约束],
字段名3 类型[(宽度) 字段约束]
);

# 注意：
1. 在同一张表中，字段名是不能相同
2. 宽度和约束可选
3. 字段名和类型是必须的
```

### 数据类型

数字类型：

* 整数类型：INT，SMALLINT，TINYINT，MEDIUMINT，BIGINT
* 浮点类型：FLOAT，DOUBLE，DECIMAL
* 比特值类型：BIT

![](./images/整型.png)

字符串类型：

* 普通字符串： CHAR，VARCHAR

* 存储文本： text

* 存储二进制数据： BLOB

* 存储选项型数据：ENUM，SET

    ![字符串](images\字符串.PNG)

* > char：定长，即指定存储字节数后，无论实际存储了多少字节数据，最终都占指定的字节大小。默认只能存1字节数据。存取效率高。
    >
    > varchar：不定长，效率偏低 ，但是节省空间，实际占用空间根据实际存储数据大小而定。必须要指定存储大小 varchar(50)
    >
    > enum用来存储给出的多个值中的一个值,即单选，enum('A','B','C')
    >
    > set用来存储给出的多个值中一个或多个值，即多选，set('A','B','C')

### 字段约束

#### 非空约束（NOT NULL）

非空约束（NOT NULL）指字段的值不能为空。对于使用了非空约束的字段，如果用户在添加数据时没有指定值，数据库系统就会报错。在表中某个列的定义后加上关键字 NOT NULL 作为限定词，来约束该列的取值不能为空。

#### 默认值（DEFAULT）

默认值约束（Default Constraint），用来指定某列的默认值。在表中插入一条新记录时，如果没有为某个字段赋值，系统就会自动为这个字段插入默认值。

#### 唯一约束（UNIQUE KEY）

唯一约束（Unique Key）是指所有记录中字段的值不能重复出现。例如，为 id 字段加上唯一性约束后，每条记录的 id 值都是唯一的，不能出现重复的情况。如果其中一条记录的 id 值为‘0001’，那么该表中就不能出现另一条记录的 id 值也为‘0001’。

#### 主键（PRIMARY KEY）

主键（PRIMARY KEY）的完整称呼是“主键约束”，是 MySQL 中使用最为频繁的约束。为了便于更快的查找到表中的记录，都会在表中设置一个主键。

#### auto_increment

约束字段为自动增长，被约束的字段必须同时被key约束。一般用于主键

## 2. 修改表

修改数据表的前提是数据库中已经存在该表。修改表指的是修改数据库中已经存在的数据表的结构。

```mysql
# 语法：alter table 表名 执行动作;

# 添加字段(add)
    alter table 表名 add 字段名 数据类型;
    alter table 表名 add 字段名 数据类型 first;
    alter table 表名 add 字段名 数据类型 after 字段名;
# 删除字段(drop)
    alter table 表名 drop 字段名;
# 修改数据类型(modify)
    alter table 表名 modify 字段名 新数据类型;
# 修改字段名(change)
    alter table 表名 change 旧字段名 新字段名 新数据类型;
# 表重命名(rename)
    alter table 表名 rename 新表名;
```

## 3. 查看表结构命令

创建完数据表之后，经常需要查看表结构（表信息）。在 MySQL 中，可以使用 DESCRIBE 和 SHOW CREATE TABLE 命令来查看数据表的结构。

- DESCRIBE：以表格的形式展示表结构

    - DESCRIBE/DESC 语句会以表格的形式来展示表的字段信息，包括字段名、字段数据类型、是否为主键、是否有默认值等，语法格式如下：

    - ```mysql
        DESCRIBE 表名;

    - 或简写成

    - ```mysql
        DESC 表名;
        ```

    - Null：表示该列是否可以存储 NULL 值。

    - Key：表示该列是否已编制索引。PRI 表示该列是表主键的一部分，UNI 表示该列是 UNIQUE 索引的一部分

    - Default：表示该列是否有默认值，如果有，值是多少。

    - Extra：表示可以获取的与给定列有关的附加信息，如 AUTO_INCREMENT 等。

- SHOW CREATE TABLE：以SQL语句的形式展示表结构

    - SHOW CREATE TABLE 命令会以 SQL 语句的形式来展示表信息。和 DESCRIBE 相比，SHOW CREATE TABLE 展示的内容更加丰富，它可以查看表的存储引擎和字符编码；另外，你还可以通过`\g`或者`\G`参数来控制展示格式。

    - ```mysql
        SHOW CREATE TABLE 表名;
        ```

        

## 3. 删除表

在 MySQL 数据库中，对于不再需要的数据表，我们可以将其从数据库中删除。

在删除表的同时，表的结构和表中所有的数据都会被删除，因此在删除数据表之前最好先备份，以免造成无法挽回的损失。

使用 DROP TABLE 语句可以删除一个或多个数据表，语法格式如下：

```mysql
DROP TABLE [IF EXISTS] 表名1 [ ,表名2, 表名3 ...]
```

- `表名1, 表名2, 表名3 ...`表示要被删除的数据表的名称。DROP TABLE 可以同时删除多个表，只要将表名依次写在后面，相互之间用逗号隔开即可。
- IF EXISTS 用于在删除数据表之前判断该表是否存在。如果不加 IF EXISTS，当数据表不存在时 MySQL 将提示错误，中断 SQL 语句的执行；加上 IF EXISTS 后，当数据表不存在时 SQL 语句可以顺利执行，但是会发出警告（warning）。